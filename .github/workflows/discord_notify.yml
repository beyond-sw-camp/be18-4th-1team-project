name: Discord Notification

on:
  issues:
    types: [opened]
  push:
  pull_request:
    types: [opened]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord Notification
        uses: Ilshidur/action-discord@master
        env:
          DISCORD_WEBHOOK: ${{ secrets.DISCORD_WEBHOOK }}
        with:
          args: |
            **ğŸ“¢ ${{ github.repository }} ì•Œë¦¼**
            
            ì‘ì—…ì: ${{ github.actor }}
            ì´ë²¤íŠ¸: **${{ github.event_name }}**
            
            ${{ 
              # 1. PUSH
              github.event_name == 'push' && 
              format('ë¸Œëœì¹˜: [{0}](https://github.com/{1}/tree/{0})\nì»¤ë°‹: [{2}](https://github.com/{1}/commit/{2})', 
                github.ref_name, 
                github.repository, 
                github.sha
              )
            }}
            ${{ 
              # 2. PULL REQUEST
              github.event_name == 'pull_request' && 
              format('PR ì œëª©: [{0}]({1})\nPR ë²ˆí˜¸: #{2}', 
                github.event.pull_request.title, 
                github.event.pull_request.html_url, 
                github.event.pull_request.number
              )
            }}
            ${{ 
              # 3. ISSUES
              github.event_name == 'issues' && 
              format('ì´ìŠˆ: [{0}]({1})', 
                github.event.issue.title, 
                github.event.issue.html_url
              )
            }}
            ${{ 
              # 4. ê¸°íƒ€ ì´ë²¤íŠ¸ ë©”ì‹œì§€
              !contains(fromJSON('["push", "pull_request", "issues"]'), github.event_name) &&
              format('ë¸Œëœì¹˜: {0}', github.ref_name)
            }}
            
            GitHub Actions ì‹¤í–‰ ë§í¬: [í´ë¦­í•˜ì—¬ ì´ë™](${{ github.server_url }}/${{ github.repository }}/actions/runs/${{ github.run_id }})