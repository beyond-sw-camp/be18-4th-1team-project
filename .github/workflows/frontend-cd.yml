name: Frontend CD

on:
  workflow_dispatch:

jobs:
  deploy:
    runs-on: self-hosted
    name: "Deploy to Local K8s"

    steps:
      - name: "Checkout code"
        uses: actions/checkout@v4

      - name: "Check kubectl context"
        run: |
          echo "🔍 Checking current context..."
          kubectl config current-context
          kubectl get nodes

      - name: "Apply Kubernetes manifests"
        working-directory: ./frontend/smerp-client/k8s
        run: |
          echo "🚀 Deploying frontend to Docker Desktop K8s..."
          kubectl apply -f .
          kubectl get pods -A
