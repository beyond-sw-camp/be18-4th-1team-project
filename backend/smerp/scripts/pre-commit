#!/usr/bin/env bash

PROJECT_ROOT=$(git rev-parse --show-toplevel)

# Gradle Wrapper 선택
if [[ "$OSTYPE" == "msys" || "$OSTYPE" == "win"* ]]; then
    GRADLEW_CMD="./gradlew.bat"
else
    GRADLEW_CMD="./gradlew"
fi

echo "Running spotlessApply. Formatting code..."
cd "$PROJECT_ROOT" && $GRADLEW_CMD spotlessApply
status=$?

if [ $status -ne 0 ]; then
  echo "Spotless apply failed!"
  exit 1
fi